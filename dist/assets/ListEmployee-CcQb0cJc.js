import{f as c,o as E,l as S,j as e,c as o,g as C,h as B,i as I,r as h,w as a,H as N,x as z,y as M,z as $,A as D}from"./index-lUerTuv-.js";import{A}from"./chunk-FAWTVNS3-BZOld-zM.js";import{u as O}from"./chunk-6RSEZNRH-Dl3B4J17.js";import{S as i}from"./chunk-GOJLRND4-B0tgbPp_.js";var g=c(function(s,n){const{className:d,centerContent:x,...p}=E(s),u=S("Container",s);return e.jsx(o.div,{ref:n,className:C("chakra-container",d),...p,__css:{...u,...x&&{display:"flex",flexDirection:"column",alignItems:"center"}}})});g.displayName="Container";var[P,m]=B({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),v=c((t,s)=>{const n=I("Table",t),{className:d,layout:x,...p}=E(t);return e.jsx(P,{value:n,children:e.jsx(o.table,{ref:s,__css:{tableLayout:x,...n.table},className:C("chakra-table",d),...p})})});v.displayName="Table";var T=c((t,s)=>{const n=m();return e.jsx(o.thead,{...t,ref:s,__css:n.thead})}),f=c((t,s)=>{const n=m();return e.jsx(o.tr,{...t,ref:s,__css:n.tr})}),k=c((t,s)=>{const n=m();return e.jsx(o.tbody,{...t,ref:s,__css:n.tbody})}),y=c(({isNumeric:t,...s},n)=>{const d=m();return e.jsx(o.td,{...s,ref:n,__css:d.td,"data-is-numeric":t})}),j=c(({isNumeric:t,...s},n)=>{const d=m();return e.jsx(o.th,{...s,ref:n,__css:d.th,"data-is-numeric":t})});function G(){const t=O(),[s,n]=h.useState([]),[d,x]=h.useState(!1),[p,u]=h.useState(!1),b=h.useCallback(async function(){try{x(!0);const l=await(await fetch("https://free-ap-south-1.cosmocloud.io/development/api/employee?limit=10&offset=0",{method:"GET",headers:{projectId:"66ae4d52d09e8cc8a8afd410",environmentId:"66ae4d52d09e8cc8a8afd411"}})).json();if(l.data<=0)throw new Error("There seems no employee");n(l.data)}catch(r){console.log("fetch emp error",r),t({title:`${r}`,variant:"solid",status:"info",isClosable:!0})}finally{x(!1)}},[t]),L=async r=>{try{const w=await(await fetch(`https://free-ap-south-1.cosmocloud.io/development/api/employee/${r}`,{method:"DELETE",headers:{projectId:"66ae4d52d09e8cc8a8afd410",environmentId:"66ae4d52d09e8cc8a8afd411"},body:JSON.stringify({})})).json();w.message&&t({title:"Employee delete",variant:"solid",status:"success",isClosable:!0}),console.log("delete employee handler",w),n(s.filter(_=>_._id!==r))}catch(l){console.log("delete employee handle",l),t({title:`${l}`,variant:"solid",status:"info",isClosable:!0})}};return h.useEffect(()=>{b()},[b]),h.useEffect(()=>{const r=setTimeout(()=>{!d&&s.length===0&&u(!0)},1e3);return()=>clearTimeout(r)},[d,s]),d?e.jsx(g,{mt:"5rem",flex:1,alignItems:"center",justifyContent:"center",marginLeft:{base:"5rem",xs:"10"},children:e.jsxs(v,{size:"lg",colorScheme:"black",minWidth:"40px",width:"800px",children:[e.jsx(T,{children:e.jsxs(f,{children:[e.jsx(j,{children:"Employee Id"}),e.jsx(j,{children:"Employee Name"})]})}),e.jsxs(k,{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(a,{paddingBlock:"20px",paddingLeft:"35px",children:e.jsx(i,{children:e.jsx("div",{children:"contents wrapped"})})})}),e.jsx("td",{children:e.jsx(a,{paddingBlock:"20px",paddingLeft:"35px",children:e.jsx(i,{children:e.jsx("div",{children:"contents wrapped"})})})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(a,{paddingBlock:"20px",paddingLeft:"35px",children:e.jsx(i,{children:e.jsx("div",{children:"contents wrapped"})})})}),e.jsx("td",{children:e.jsx(a,{paddingBlock:"20px",paddingLeft:"35px",children:e.jsx(i,{children:e.jsx("div",{children:"contents wrapped"})})})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(a,{paddingBlock:"20px",paddingLeft:"35px",children:e.jsx(i,{children:e.jsx("div",{children:"contents wrapped"})})})}),e.jsx("td",{children:e.jsx(a,{paddingBlock:"20px",paddingLeft:"35px",children:e.jsx(i,{children:e.jsx("div",{children:"contents wrapped"})})})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(a,{paddingBlock:"20px",paddingLeft:"35px",children:e.jsx(i,{children:e.jsx("div",{children:"contents wrapped"})})})}),e.jsx("td",{children:e.jsx(a,{paddingBlock:"20px",paddingLeft:"35px",children:e.jsx(i,{children:e.jsx("div",{children:"contents wrapped"})})})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(a,{paddingBlock:"20px",paddingLeft:"35px",children:e.jsx(i,{children:e.jsx("div",{children:"contents wrapped"})})})}),e.jsx("td",{children:e.jsx(a,{paddingBlock:"20px",paddingLeft:"35px",children:e.jsx(i,{children:e.jsx("div",{children:"contents wrapped"})})})})]})]})]})}):p?e.jsx(a,{flex:1,placeItems:"center",children:e.jsx(A,{p:"4",color:"white",axis:"both",children:e.jsx(N,{as:"h4",size:"xl",noOfLines:2,color:"teal.400",children:"There are no Employee Currently ðŸ¤”"})})}):e.jsx(g,{size:"md",mt:"5rem",flex:1,alignItems:"center",justifyContent:"center",children:e.jsxs(v,{size:"lg",colorScheme:"black",minWidth:"40px",width:"800px",children:[e.jsx(T,{children:e.jsxs(f,{children:[e.jsx(j,{children:"Employee Id"}),e.jsx(j,{children:"Employee Name"}),e.jsx(j,{})]})}),e.jsx(k,{children:(s==null?void 0:s.length)>0&&s.map((r,l)=>e.jsxs(f,{children:[e.jsx(y,{children:e.jsx(z,{as:M,to:`about/${r._id}`,children:r._id})}),e.jsx(y,{children:r.name}),e.jsxs(y,{children:[" ",e.jsx($,{isRound:!0,size:"lg","aria-label":"dropdown",icon:e.jsx(D,{size:20}),variant:"ghost",onClick:()=>L(r._id)})]})]},l))})]})})}export{G as default};
